//db.js
const mongoose = require('mongoose');

// User model
const userSchema = new mongoose.Schema({
  username: String,
  name: String,
  email: String,
  bio: String,
  profilePicture: String,
  tweets: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Tweet' }],
  followers: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Follower' }],
  following: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Following' }],
  notifications: [{ type: String, username: String, tweetId: String }],
  directMessages: [{ from: String, content: String, timestamp: Date }],
  likes: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Like' }],
  retweets: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Retweet' }],
  bookmarks: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Bookmark' }],
});

const User = mongoose.model('User', userSchema);

// Tweet model
const tweetSchema = new mongoose.Schema({
  content: String,
  likes: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Like' }],
  retweets: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Retweet' }],
  bookmarks: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Bookmark' }],
  timestamp: Date,
  images: [String],
});

const Tweet = mongoose.model('Tweet', tweetSchema);

// Like model
const likeSchema = new mongoose.Schema({
  username: String,
  tweetId: String,
});

const Like = mongoose.model('Like', likeSchema);

// Retweet model
const retweetSchema = new mongoose.Schema({
  username: String,
  tweetId: String,
});

const Retweet = mongoose.model('Retweet', retweetSchema);

// Follower model
const followerSchema = new mongoose.Schema({
  username: String,
  userId: String,
});

const Follower = mongoose.model('Follower', followerSchema);

// Following model
const followingSchema = new mongoose.Schema({
  username: String,
  userId: String,
});

const Following = mongoose.model('Following', followingSchema);

// Bookmark model
const bookmarkSchema = new mongoose.Schema({
  username: String,
  tweetId: String,
});

const Bookmark = mongoose.model('Bookmark', bookmarkSchema);

module.exports = {
  User,
  Tweet,
  Like,
  Retweet,
  Follower,
  Following,
  Bookmark,
};
